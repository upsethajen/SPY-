<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spy Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    color: white;
}

/* SETUP SCREEN */
#setup {
    height: 100vh;
    background:
        linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
        url("https://upload.wikimedia.org/wikipedia/commons/4/4d/Sankt_Petri_skola_Malm%C3%B6.jpg");
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

h1 {
    font-size: 2.5em;
    margin-bottom: 20px;
}

label {
    font-size: 1.2em;
    margin-top: 15px;
}

input, select {
    font-size: 1.2em;
    padding: 12px;
    margin-top: 8px;
    width: 80%;
    max-width: 280px;
    border-radius: 10px;
    border: none;
}

button {
    font-size: 1.3em;
    padding: 15px;
    margin-top: 25px;
    width: 80%;
    max-width: 280px;
    border: none;
    border-radius: 12px;
    background: #4CAF50;
    color: white;
}

button:active {
    background: #3b9a42;
}

/* GAME SCREEN */
#game {
    height: 100vh;
    background: #111;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.card {
    background: #222;
    padding: 35px;
    border-radius: 18px;
    font-size: 1.6em;
    max-width: 85%;
}

.hidden {
    display: none;
}
</style>
</head>

<body>

<!-- SETUP -->
<div id="setup">
    <h1>üïµÔ∏è SPY GAME</h1>

    <label>Number of players</label>
    <input type="number" id="players" min="3" max="20" value="5">

    <label>Choose category</label>
    <select id="categorySelect"></select>

    <button id="startBtn">Start Game</button>
</div>

<!-- GAME -->
<div id="game" class="hidden">
    <h2 id="playerTitle"></h2>

    <div class="card" id="cardText">
        Tap to reveal your role
    </div>

    <button id="tapBtn">Tap</button>
    <button id="restartBtn" class="hidden">Restart</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

const categories = {
    "Places": ["Beach", "Airport", "School", "Hospital", "Restaurant"],
    "Objects": ["Camera", "Laptop", "Backpack", "Clock", "Toothbrush"],
    "Activities": ["Swimming", "Cooking", "Hiking", "Dancing", "Studying"]
};

let numPlayers, spy, category, word;
let currentPlayer = 1;
let revealed = false;
let starter;

const categorySelect = document.getElementById("categorySelect");
const startBtn = document.getElementById("startBtn");
const tapBtn = document.getElementById("tapBtn");
const restartBtn = document.getElementById("restartBtn");

for (let cat in categories) {
    const option = document.createElement("option");
    option.value = cat;
    option.textContent = cat;
    categorySelect.appendChild(option);
}

startBtn.onclick = startGame;
tapBtn.onclick = nextStep;
restartBtn.onclick = restartGame;

function startGame() {
    numPlayers = parseInt(document.getElementById("players").value);
    category = categorySelect.value;

    word = categories[category][Math.floor(Math.random() * categories[category].length)];
    spy = Math.floor(Math.random() * numPlayers) + 1;
    starter = Math.floor(Math.random() * numPlayers) + 1;

    document.getElementById("setup").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");

    currentPlayer = 1;
    updateScreen();
}

function updateScreen() {
    document.getElementById("playerTitle").textContent = `Player ${currentPlayer}`;
    document.getElementById("cardText").textContent = "Tap to reveal your role";
    revealed = false;
}

function nextStep() {
    const card = document.getElementById("cardText");

    if (!revealed) {
        if (currentPlayer === spy) {
            card.innerHTML = "üïµÔ∏è<br><b>YOU ARE THE SPY</b>";
        } else {
            card.innerHTML = `<b>Category:</b><br>${category}<br><br><b>Word:</b><br>${word}`;
        }
        revealed = true;
    } else {
        currentPlayer++;
        if (currentPlayer > numPlayers) {
            card.innerHTML = `Everyone has seen their role.<br><br><b>Player ${starter}</b> starts talking!`;
            tapBtn.classList.add("hidden");
            restartBtn.classList.remove("hidden");
        } else {
            updateScreen();
        }
    }
}

function restartGame() {
    document.getElementById("game").classList.add("hidden");
    document.getElementById("setup").classList.remove("hidden");
    tapBtn.classList.remove("hidden");
    restartBtn.classList.add("hidden");
}
});
</script>

</body>
</html>
